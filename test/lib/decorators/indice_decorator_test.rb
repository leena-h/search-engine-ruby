require 'test_helper'

class IndiceDecoratorTest < Minitest::Test
  def test_shows_search_results_correctly
    search_result =
      SearchEngine.new.perform_search(indice_type: 'users', term: '_id', value: 1)
    expected = expected_terminal_output
    result = IndiceDecorator.new(search_result).to_pretty_string
    assert_equal(expected, result)
  end

  def expected_terminal_output
    "_id: 1\nurl: http://initech.zendesk.com/api/v2/users/1.json\nexternal_id: 74341f74-9c79-49d5-9611-87ef9b6eb75f\nname: Francisca Rasmussen\nalias: Miss Coffey\ncreated_at: 2016-04-15T05:19:46 -10:00\nactive: true\nverified: true\nshared: false\nlocale: en-AU\ntimezone: Sri Lanka\nlast_login_at: 2013-08-04T01:03:27 -10:00\nemail: coffeyrasmussen@flotonic.com\nphone: 8335-422-718\nsignature: Don't Worry Be Happy!\norganization_id: 119\ntags: [\"Springville\", \"Sutton\", \"Hartsville/Hartley\", \"Diaperville\"]\nsuspended: true\nrole: admin\n\nRELATED ORGANIZATIONS\n_id: 119\nurl: http://initech.zendesk.com/api/v2/organizations/119.json\nexternal_id: 2386db7c-5056-49c9-8dc4-46775e464cb7\nname: Multron\ndomain_names: [\"bleeko.com\", \"pulze.com\", \"xoggle.com\", \"sultraxin.com\"]\ncreated_at: 2016-02-29T03:45:12 -11:00\ndetails: Non profit\nshared_tickets: false\ntags: [\"Erickson\", \"Mccoy\", \"Wiggins\", \"Brooks\"]\n\n\nRELATED SUBMITTED TICKETS\n_id: fc5a8a70-3814-4b17-a6e9-583936fca909\nurl: http://initech.zendesk.com/api/v2/tickets/fc5a8a70-3814-4b17-a6e9-583936fca909.json\nexternal_id: e8cab26b-f3b9-4016-875c-b0d9a258761b\ncreated_at: 2016-07-08T07:57:15 -10:00\ntype: problem\nsubject: A Nuisance in Kiribati\ndescription: Ipsum reprehenderit non ea officia labore aute. Qui sit aliquip ipsum nostrud anim qui pariatur ut anim aliqua non aliqua.\npriority: high\nstatus: open\nsubmitter_id: 1\nassignee_id: 19\norganization_id: 120\ntags: [\"Minnesota\", \"New Jersey\", \"Texas\", \"Nevada\"]\nhas_incidents: true\nvia: voice\n\n_id: cb304286-7064-4509-813e-edc36d57623d\nurl: http://initech.zendesk.com/api/v2/tickets/cb304286-7064-4509-813e-edc36d57623d.json\nexternal_id: df00b850-ca27-4d9a-a91a-d5b8d130a79f\ncreated_at: 2016-03-30T11:43:24 -11:00\ntype: task\nsubject: A Nuisance in Saint Lucia\ndescription: Nostrud veniam eiusmod reprehenderit adipisicing proident aliquip. Deserunt irure deserunt ea nulla cillum ad.\npriority: urgent\nstatus: pending\nsubmitter_id: 1\nassignee_id: 11\norganization_id: 106\ntags: [\"Missouri\", \"Alabama\", \"Virginia\", \"Virgin Islands\"]\nhas_incidents: false\ndue_at: 2016-08-03T04:44:08 -10:00\nvia: chat\n\n\nRELATED ASSIGNED TICKETS\n_id: 1fafaa2a-a1e9-4158-aeb4-f17e64615300\nurl: http://initech.zendesk.com/api/v2/tickets/1fafaa2a-a1e9-4158-aeb4-f17e64615300.json\nexternal_id: f6f639a4-a8af-4910-804f-5c3a80252653\ncreated_at: 2016-01-15T11:52:49 -11:00\ntype: problem\nsubject: A Problem in Russian Federation\ndescription: Elit exercitation veniam commodo nulla laboris. Dolore occaecat cillum nisi amet in.\npriority: low\nstatus: solved\nsubmitter_id: 44\nassignee_id: 1\norganization_id: 115\ntags: [\"Georgia\", \"Tennessee\", \"Mississippi\", \"Marshall Islands\"]\nhas_incidents: true\ndue_at: 2016-08-07T04:10:34 -10:00\nvia: voice\n\n_id: 13aafde0-81db-47fd-b1a2-94b0015803df\nurl: http://initech.zendesk.com/api/v2/tickets/13aafde0-81db-47fd-b1a2-94b0015803df.json\nexternal_id: 6161e938-50cc-4545-acff-a4f23649b7c3\ncreated_at: 2016-03-30T08:35:27 -11:00\ntype: task\nsubject: A Problem in Malawi\ndescription: Lorem ipsum eiusmod pariatur enim. Qui aliquip voluptate cupidatat eiusmod aute velit non aute ullamco.\npriority: urgent\nstatus: solved\nsubmitter_id: 42\nassignee_id: 1\norganization_id: 122\ntags: [\"New Mexico\", \"Nebraska\", \"Connecticut\", \"Arkansas\"]\nhas_incidents: false\ndue_at: 2016-08-08T03:25:53 -10:00\nvia: voice\n"
  end
end
